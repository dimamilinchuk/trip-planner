# Лабораторна робота №7: Розгортання програмного забезпечення

## Зміст
1. [Налаштування CI](#1-налаштування-ci)
2. [Доступність сервісу](#2-доступність-сервісу)
3. [Висновок](#3-висновок)
4. [Подальші кроки](#4-подальші-кроки)

---

## 1. Налаштування CI

**Ціль:** Забезпечення автоматичної перевірки якості коду та дотримання стилю як на локальному рівні, так і при створенні Pull Request'ів або комітів до гілки `main`.

---

### **Інструменти:**
- **Prettier**: Автоматичне форматування коду.
- **ESLint**: Перевірка коду на статичні помилки.
- **CommitLint**: Перевірка повідомлень комітів на відповідність стандарту Conventional Commits.
- **Husky**: Використовується для виконання локальних Git-хуків (pre-commit та commit-msg).
- **GitHub Actions**: Виконує перевірки на рівні CI (сборка, лінтинг, тестування).

---

### **Локальні перевірки за допомогою Husky**

Husky використовується для автоматичного запуску перевірок при створенні комітів.

#### **Налаштування Husky:**
1. Husky інтегрується через скрипт `prepare`, зазначений у `package.json`:
   ```json
   "prepare": "husky install"
   ```
2. Хуки налаштовані через файли:
   - **`pre-commit`:** Виконує перевірку ESLint та Prettier.
   - **`commit-msg`:** Перевіряє стиль комітів за допомогою CommitLint.

#### **Зміст файлів:**
- **pre-commit**: [Файл pre-commit](../../.husky/pre-commit)
  ```bash
  npx lint-staged
  ```
- **commit-msg**: [Файл commit-msg](../../.husky/commit-msg)
  ```bash
  npx --no-install commitlint --edit "$1"
  ```

#### **Конфігурації:**
- **CommitLint:** [Файл commitlint.config.js](../../commitlint.config.js) використовує конфігурацію Conventional Commits:
  ```javascript
  export default { extends: ['@commitlint/config-conventional'] };
  ```
- **ESLint і Prettier:** Конфігурації розташовані у файлах:
  - ESLint: [eslint.config.js](../../eslint.config.js)
  - Prettier: [`.prettierrc`](../../.prettierrc)

#### **Результат:**
- **Коміт блокується**, якщо не виконані вимоги щодо коду чи стилю комітів.
- Всі файли форматуються та перевіряються перед додаванням у репозиторій.

---

### **Серверні перевірки через GitHub Actions**

GitHub Actions забезпечує автоматизацію перевірок на рівні сервера.

#### **CI Конфігурація (файл [ci.yml](../../.github/workflows/ci.yml))**:
- Виконується на кожен **Pull Request** і **Push** у гілку `main`.
- Основні етапи:
  1. **Checkout коду.**
  2. **Установка залежностей.**
  3. **Перевірка коду ESLint та Prettier.**
  4. **Сборка проекту.**

#### **Результат:**
- CI гарантує, що Pull Request не може бути злитий без проходження перевірок.

---

### **Файли та конфігурації**
1. **Husky:** [`.husky/pre-commit`](../../.husky/pre-commit), [`.husky/commit-msg`](../../.husky/commit-msg)
2. **GitHub Actions:** [`.github/workflows/ci.yml`](../../../.github/workflows/ci.yml)
3. **Скрипти package.json:**
   ```json
   {
     "scripts": {
       "lint": "eslint .",
       "format": "prettier --write .",
       "prepare": "husky install"
     }
   },
   "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ]
  }
   ```

---

### **Результат**
- Локальні перевірки Husky гарантують якість перед комітами.
- CI через GitHub Actions забезпечує додатковий рівень контролю під час розробки та злиття.

---

## 2. Доступність сервісу

На даний момент сервіс працює локально і не має автоматизованого розгортання на сервері (CD не налаштований).

### **Локальний запуск:**
1. **Запуск проекту:**
   ```bash
   npm run start
   ```
2. **Перевірка доступності локально:**
   - Перейти на [http://localhost:5001](http://localhost:5001) для перевірки інтерфейсу.
   - Всі зміни проходять перевірку перед комітом і злиттям в основну гілку `main`.

---

## 3. Висновок

1. **CI** успішно налаштовано для автоматичної перевірки комітів та Pull Request'ів.
2. Автоматичне розгортання (CD) не налаштоване, сервіс розгортається локально.

---

## 4. Подальші кроки

1. Налаштувати CD для автоматичного розгортання проекту на сервері.
2. Додати тести для перевірки функціональності (наприклад, Jest).
3. Розширити CI для виконання тестів перед злиттям Pull Request'ів.

---